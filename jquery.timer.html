<!DOCTYPE html>

<html>
<head>
	<title>jQuery Timer Events</title>
	<script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.js"></script>
	<script src="jquery.timer.js"></script>
</head>

<body>

<div id=interval>
	Interval Timer
	<input type=button value=Start /> <input type=button value=Stop />
	<label>Duration: <input class=duration /></label>
	<span></span>
</div>
<div id=timeout>
	Timeout Timer
	<input type=button value=Start /> <input type=button value=Stop />
	<label>Duration: <input class=duration /></label>
	<span></span>
</div>
<div id=immediate>
	Immediate "Timer"
	<input type=button value=Start />
	<span></span>
</div>

<script>

	$('#interval input[value=Start]').click(function(){
		duration = $('#interval input.duration').val();
		if (!isNaN(parseInt(duration))) duration = parseInt(duration); 
		$('#interval span').on('interval', {duration: duration}, function(){
			$(this).text($(this).text()+' ping!');
		});
	});
	$('#interval input[value=Stop]').click(function(){
		$('#interval span').off('interval');
	});
	$('#timeout input[value=Start]').click(function(){
		duration = $('#timeout input.duration').val();
		if (!isNaN(parseInt(duration))) duration = parseInt(duration); 
		$('#timeout span').on('timeout', {duration: duration}, function(){
			$(this).text($(this).text()+ ' ping!');
		});
	});
	$('#timeout input[value=Stop]').click(function(){
		$('#timeout span').off('timeout');
	});
	$('#immediate input[value=Start]').click( ()=>{
		$('#immediate span').on('immediate', function(){
			$(this).text($(this).text() + ' ping!');
		}).text($('#immediate span').text() + ' before ping!'); // demonstrates that "immediate" is on the queue, not really immediate.
	});
</script>
</body>
</html>
